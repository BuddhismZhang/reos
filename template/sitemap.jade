doctype xml

macro get_date(post)
    post.date.format("%Y-%m-%dT%H:%M:%S+00:00")

set_content_type('text/xml')

//
    This is a XML sitemap file. Which is supported by many search engines like Google.
    You can find more information about XML sitemap on `http://sitemaps.org`.
    Generated by farbox theme reos, theme by oyiadin.

urlset(xmlns="http://www.sitemaps.org/schemas/sitemap/0.9")
    url
        loc= "//" + site.domain
        lastmod
            get_date(posts[0])
        changefreq weekly
        priority 1.0

    for post in posts
        url
            loc= "//" + site.domain + post.url
            lastmod
                get_date(post)
            changefreq monthly
            priority 0.7

    for tag in site.tags
        //- tag: [tag_name, tag_count]
        url
            loc= "//" + site.domain + "/tags/" + tag[0]
            lastmod
                get_date( get_data(type="post", tags=tag[0])[0] )
                //- 取得被打上 tag_name 的最新文章的发表时间
            changefreq monthly
            priority 0.4