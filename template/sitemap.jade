doctype xml

set_content_type('text/xml')
date_format = "%Y-%m-%dT%H:%M:%S+00:00"
posts = get_data(type="post", status='all', limit=300)

//
    This is a XML sitemap file. Which is supported by many search engines like Google.
    You can find more information about XML sitemap on `http://sitemaps.org`.
    Generated by farbox theme reos, theme by oyiadin.

urlset(xmlns="http://www.sitemaps.org/schemas/sitemap/0.9")
    url
        loc= "//" + site.domain
        lastmod
            {{ posts[0].date.format(date_format) }}
        changefreq weekly
        priority 1.0

    for post in posts
        url
            loc= "//" + site.domain + post.url
            lastmod
                {{ post.date.format(date_format) }}
            changefreq monthly
            priority 0.7

    for tag in site.tags
        //- tag: [tag_name, tag_count]
        url
            loc= "//" + site.domain + "/tag/" + tag[0]
            lastmod
                {{ posts[0].date.format(date_format) }}
                //- 取得被打上 tag_name 的最新文章的发表时间
            changefreq monthly
            priority 0.4