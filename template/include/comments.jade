if site.configs.comment_system == 'disqus' and site.configs.disqus
   div#disqus_thread
   script(type="text/javascript").
       /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
       var disqus_shortname = '{{ site.configs.disqus }}';
       /* * * DON'T EDIT BELOW THIS LINE * * */
       (function() {
           var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
           dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
           (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
       })();
   noscript Please enable JavaScript to view the
       a(href="http://disqus.com/?ref_noscript") comments powered by Disqus.
   a.dsq-brlink(href="http://disqus.com") comments powered by
       span.logo-disqus  Disqus

elif site.config.comment_system == 'dushuo' and site.configs.duoshuo
   div.ds-thread
   script(type="text/javascript").
       var duoshuoQuery = {short_name:"{{ site.configs.duoshuo }}"};
       (function() {
           var ds = document.createElement('script');
           ds.type = 'text/javascript';ds.async = true;
           ds.src = 'http://static.duoshuo.com/embed.js';
           ds.charset = 'UTF-8';
           (document.getElementsByTagName('head')[0] 
           || document.getElementsByTagName('body')[0]).appendChild(ds);
       })();

else
   section#comments
       for comment in get_comments(post)
           div.comment
               span.comment_avatar
                   img(src="/service/static_3rd/avatar/{{ comment.email_md5 }}?s=80")
               div.comment_info
                   span.comment_author
                       a(href="{{ comment.site or '#' }}")
                           if comment.author
                               strong= comment.author
                           else
                               | 匿名网友
                   span.comment_date= comment.date.format("%Y-%m-%d %H:%M:%S")
               div.comment_content= comment.content

   if comment_allowed
       //- 表单的 POST 应该发到文章本页。
       form(method="post", action="#comments")
           textarea(name="content", rows="10")= comment_content

           if error
               p= error

           input(type="text", name="author", value="称呼")
           input(type="text", name="email", value="邮箱")
           input(type="text", name="site", value="网站")
           input(type="submit", value="提交")
