{% extends 'base.html' %}
{% from 'macro.html' import comment %}

{% block title %}
{{ post.title }} · {{ site.title }}
{% endblock %}

{% block meta %}
<meta name="description" content="
    {% if post.title|length > 30 %}
    {{ post.title[:30] }}...
    {% else %}
    {{ post.title }}
    {% endif %}" />
    {# 如果使用post.raw_content，会乱死，而且无法判断关键字句。 #}
<meta name="keywords" content="
    {{ ','.join(post.tags[:6]) }}" />

{% if site.configs['enable_twitter_cards'] == True %}

<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="{{ post.title }}" />
<meta name="twitter:description" content="{{ html_to_text(post.content)[:202] }}" />
{# 这样的返回值比post.raw_content优雅很多~ ^-^ #}

{% if site.configs['twitter'] %}
<meta name="twitter:creator" content="{{ site.configs['twitter'] }}" />
{% endif %}

{% if post.cover %}
<meta name="twitter:image:src" content="{{ post.cover }}" />
{% endif %}

{% endif %}

{% endblock %}

{% block main %}
<article>
    <h1 id="postTitle"><a href="#postTitle">{{ post.title }}</a></h1>
    <p id="postInfo" class="info">
        {{ post.date | date("%b %d, %Y %H:%M (%a)") }}
        <span id="tags">
            {% for tag in post.tags %} · <a href="/tags/{{ tag }}" class="n g">{{ tag }}</a>{% endfor %} · 
        </span>
        <span id="views">
            {{ post.visits }} views
        </span>
    </p>
    <div id="postContent">{{ post.content }}</div>
    <div class="eof" class="g s" title="End Of File">· EOF ·</div>
    {{ comment() }}
</article>
{% endblock %}
